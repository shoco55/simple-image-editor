import{o as F,c as B,p as N,a as q,b as c,E as _e,d as z,r as D,e as y,f as _,w as C,u as S,g as fe,h as R,t as U,F as Q,i as W,j as V,q as Z,k as Ee,l as Xe,m as Ye,n as we,s as Se,v as Re,x as Me,y as Ce,z as j,A as Fe,B as De}from"./vendor.cd9b64e0.js";const Be=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))p(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&p(f)}).observe(document,{childList:!0,subtree:!0});function v(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerpolicy&&(h.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?h.credentials="include":d.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function p(d){if(d.ep)return;d.ep=!0;const h=v(d);fetch(d.href,h)}};Be();var I=(a,l)=>{const v=a.__vccOpts||a;for(const[p,d]of l)v[p]=d;return v};const ye={},ze=a=>(N("data-v-71018ad1"),a=a(),q(),a),Ie={class:"app-header"},Ae=ze(()=>c("h1",{class:"title"},[c("span",{class:"en"},"Simple image editor"),c("span",{class:"ja"},"- \u30C8\u30EA\u30DF\u30F3\u30B0\u30FB\u56DE\u8EE2\u30FB\u30EA\u30B5\u30A4\u30BA -")],-1)),be=[Ae];function Le(a,l){return F(),B("div",Ie,be)}var xe=I(ye,[["render",Le],["__scopeId","data-v-71018ad1"]]);const ee=()=>({showMessage:(l,v,p)=>{_e({type:l,message:v,showClose:p})}}),$e={class:"image-upload"},ke=c("div",{class:"el-upload__text"},[R(" \u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7 \u307E\u305F\u306F "),c("em",null,"\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E")],-1),Ue=c("div",{class:"el-upload__tip"},[c("p",null,"\u203B\u5BFE\u5FDC\u30D5\u30A1\u30A4\u30EB\u5F62\u5F0F\uFF1Ajpg/jpeg, png"),c("p",null,"\u203B\u753B\u50CF\u306F\u30B5\u30FC\u30D0\u30FC\u306B\u306F\u4FDD\u5B58\u3055\u308C\u307E\u305B\u3093\u3002")],-1),Te=z({emits:["goToEditor"],setup(a,{emit:l}){const{showMessage:v}=ee(),p=D(),d=e=>{e.length>1?v("warning","\u9078\u629E\u3067\u304D\u308B\u30D5\u30A1\u30A4\u30EB\u6570\u306F1\u500B\u3067\u3059\u3002",!0):(p.value.clearFiles(),p.value.handleStart(e[0]))},h=e=>{var w;const Y=(w=e.raw)==null?void 0:w.type;Y==="image/jpeg"||Y==="image/png"?f(e):(p.value.clearFiles(),v("warning","\u753B\u50CF\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306F\u300Cjpg/jpeg, png\u300D\u5F62\u5F0F\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u3059\u3002",!0))},f=e=>{l("goToEditor",e)},u=()=>{v("error","\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u7D4C\u3063\u3066\u304B\u3089\u3001\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",!0)};return(e,Y)=>{const w=y("el-icon"),n=y("el-upload");return F(),B("div",$e,[_(n,{ref_key:"uploadFile",ref:p,class:"upload-demo",drag:"",action:"#","auto-upload":!1,"show-file-list":!1,limit:1,"on-exceed":d,"on-change":h,"before-upload":u},{tip:C(()=>[Ue]),default:C(()=>[_(w,{class:"el-icon--upload"},{default:C(()=>[_(S(fe))]),_:1}),ke]),_:1},512)])}}});const Oe=a=>(N("data-v-5412608a"),a=a(),q(),a),Pe={class:"image-information"},We=Oe(()=>c("h2",{class:"heading"},"\u7DE8\u96C6\u60C5\u5831",-1)),Ve={class:"text"},je={class:"text"},Ne=R(" \u9078\u629E\u7BC4\u56F2\uFF1A "),qe=R("\u672A\u9078\u629E"),He=z({props:{uploadImage:null,canvas:null},setup(a){const l=a;return(v,p)=>(F(),B("div",Pe,[We,c("p",Ve," \u73FE\u5728\u306E\u30B5\u30A4\u30BA\uFF1A"+U(l.uploadImage.currentSize.width)+" \xD7 "+U(l.uploadImage.currentSize.height)+" px ",1),c("p",je,[Ne,l.canvas.hasRect?(F(),B(Q,{key:0},[R(U(l.uploadImage.cropSize.width)+" \xD7 "+U(l.uploadImage.cropSize.height)+" px",1)],64)):(F(),B(Q,{key:1},[qe],64))])]))}});var Ge=I(He,[["__scopeId","data-v-5412608a"]]);const H=a=>(N("data-v-062a75ef"),a=a(),q(),a),Ke={class:"image-resize"},Je={class:"heading"},Qe=R(" \u30EA\u30B5\u30A4\u30BA "),Ze={class:"resize-form"},et=H(()=>c("span",{class:"label"},"\u65B0\u898F\u30B5\u30A4\u30BA\uFF1A",-1)),tt={class:"content"},ot=H(()=>c("span",null,"\xD7",-1)),ut=H(()=>c("span",null,"px",-1)),st={class:"resizeButton"},nt=R("\u65B0\u898F\u30B5\u30A4\u30BA\u306B\u5909\u66F4"),at=z({props:{uploadImage:null},emits:["setImageResize","resizeCanvasImage"],setup(a,{emit:l}){const v=a,p=W({width:0,height:0});V(()=>{p.width=v.uploadImage.resize.width,p.height=v.uploadImage.resize.height});const d=e=>{f(e,"width")},h=e=>{f(e,"height")},f=(e,Y)=>{const w=Y==="width"?"height":"width",n=e/v.uploadImage.currentSize[Y];p[w]=Math.round(v.uploadImage.currentSize[w]*n),l("setImageResize",p.width,p.height)},u=()=>{l("resizeCanvasImage")};return(e,Y)=>{const w=y("el-button"),n=y("el-tooltip"),E=y("el-input-number");return F(),B("div",Ke,[c("h2",Je,[Qe,_(n,{content:"\u5143\u306E\u753B\u50CF\u306E\u30B5\u30A4\u30BA\u6BD4\u7387\u3092\u4FDD\u3063\u305F\u307E\u307E\u3001\u30B5\u30A4\u30BA\u3092\u5909\u66F4\u3067\u304D\u307E\u3059\u3002<br>\u73FE\u5728\u306E\u30B5\u30A4\u30BA\u3088\u308A\u62E1\u5927\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093\u3002<br><br>\u30C8\u30EA\u30DF\u30F3\u30B0\u7BC4\u56F2\u9078\u629E\u4E2D\u306B\u30EA\u30B5\u30A4\u30BA\u3059\u308B\u3068\u3001\u9078\u629E\u7BC4\u56F2\u304C\u89E3\u9664\u3055\u308C\u307E\u3059\u3002<br>\u30C8\u30EA\u30DF\u30F3\u30B0\u5F8C\u306B\u7E2E\u5C3A\u306E\u5909\u66F4\u3092\u884C\u3044\u305F\u3044\u5834\u5408\u306F\u3001<br>\u7BC4\u56F2\u9078\u629E\u5F8C\u306B\u300C\u9078\u629E\u7BC4\u56F2\u3092\u30C8\u30EA\u30DF\u30F3\u30B0\u300D\u3092\u62BC\u4E0B\u3057\u3066\u304B\u3089\u3001<br>\u30EA\u30B5\u30A4\u30BA\u3092\u884C\u3063\u3066\u4E0B\u3055\u3044\u3002","raw-content":"",placement:"top-start"},{default:C(()=>[_(w,{class:"tooltipIcon",icon:S(Z),circle:""},null,8,["icon"])]),_:1})]),c("div",Ze,[et,c("div",tt,[_(E,{modelValue:S(p).width,"onUpdate:modelValue":Y[0]||(Y[0]=m=>S(p).width=m),min:1,max:v.uploadImage.currentSize.width,"controls-position":"right",onChange:d},null,8,["modelValue","max"]),ot,_(E,{modelValue:S(p).height,"onUpdate:modelValue":Y[1]||(Y[1]=m=>S(p).height=m),min:1,max:v.uploadImage.currentSize.height,"controls-position":"right",onChange:h},null,8,["modelValue","max"]),ut])]),c("div",st,[_(w,{type:"primary",plain:"",onClick:u},{default:C(()=>[nt]),_:1})])])}}});var rt=I(at,[["__scopeId","data-v-062a75ef"]]);const it=()=>{const a=D(!0);return{isLoading:a,openLoading:()=>{a.value=!0},closeLoading:()=>{a.value=!1}}};const ct={class:"image-menu"},lt={class:"heading"},dt=R(" \u7DE8\u96C6\u30E1\u30CB\u30E5\u30FC "),mt={class:"menu"},pt=R("\u9078\u629E\u7BC4\u56F2\u3092\u30C8\u30EA\u30DF\u30F3\u30B0"),vt=R("\u53F3\u306B90\xB0\u56DE\u8EE2"),ht=R("\u5DE6\u306B90\xB0\u56DE\u8EE2"),gt=z({props:{canCrop:{type:Boolean}},emits:["cropCanvasImage","rotateCanvasImage"],setup(a,{emit:l}){const v=a,p=()=>{l("cropCanvasImage")},d=h=>{l("rotateCanvasImage",h)};return(h,f)=>{const u=y("el-button"),e=y("el-tooltip");return F(),B("div",ct,[c("h2",lt,[dt,_(e,{content:"\u753B\u50CF\u3092\u30C8\u30EA\u30DF\u30F3\u30B0\u3059\u308B\u306B\u306F\u3001\u753B\u50CF\u4E0A\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304B\u3089\u30C9\u30E9\u30C3\u30B0\u3067\u7BC4\u56F2\u3092\u9078\u629E\u3057\u3066\u3001<br>\u300C\u9078\u629E\u7BC4\u56F2\u3092\u30C8\u30EA\u30DF\u30F3\u30B0\u300D\u30DC\u30BF\u30F3\u3092\u62BC\u4E0B\u3057\u3066\u304F\u3060\u3055\u3044\u3002<br>\u9078\u629E\u7BC4\u56F2\u306E\u30B5\u30A4\u30BA\u306F\u300C\u7DE8\u96C6\u60C5\u5831\u300D\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002","raw-content":"",placement:"top-start"},{default:C(()=>[_(u,{class:"tooltipIcon",icon:S(Z),circle:""},null,8,["icon"])]),_:1})]),c("div",mt,[_(u,{type:"primary",plain:"",disabled:!v.canCrop,onClick:p},{default:C(()=>[pt]),_:1},8,["disabled"]),_(u,{type:"primary",plain:"",onClick:f[0]||(f[0]=Y=>d("right"))},{default:C(()=>[vt]),_:1}),_(u,{type:"primary",plain:"",onClick:f[1]||(f[1]=Y=>d("left"))},{default:C(()=>[ht]),_:1})])])}}});var _t=I(gt,[["__scopeId","data-v-44e36bf0"]]);const ft={style:{width:"100%"},class:"image-editor"},Et={class:"image-editor-layout"},Xt={class:"image-editor-main"},Yt={class:"image-canvas"},wt={class:"operations"},St=R("\u30EA\u30BB\u30C3\u30C8"),Rt=R("\u7DE8\u96C6\u3057\u305F\u753B\u50CF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9"),Mt=R(" \u753B\u50CF\u3092\u9078\u629E\u3057\u76F4\u3059 "),Ct={class:"image-editor-panel"},Ft={class:"panel-block"},Dt={class:"panel-block"},Bt=z({props:{uploadFile:null},emits:["returnUploader"],setup(a,{emit:l}){const v=a;Ee(()=>{G()});const{isLoading:p,openLoading:d,closeLoading:h}=it(),{showMessage:f}=ee(),u=W({originalFile:void 0,currentSize:{width:0,height:0},cropSize:{width:0,height:0},resize:{width:0,height:0}}),e=W({displayReductionRatio:1,mouseDownX:0,mouseDownY:0,mouseMoveX:0,mouseMoveY:0,tempRectStartX:0,tempRectStartY:0,tempRectEndX:0,tempRectEndY:0,rectStartX:0,rectStartY:0,rectEndX:0,rectEndY:0,clickableRange:16,isMouseDown:!1,isMouseWithinRect:!1,hasRect:!1});V(()=>{u.cropSize.width=e.tempRectEndX-e.tempRectStartX,u.cropSize.height=e.tempRectEndY-e.tempRectStartY}),V(()=>{u.resize.width=u.currentSize.width,u.resize.height=u.currentSize.height});const Y=Xe(()=>u.cropSize.width>0&&u.cropSize.height>0),w=D(),n=D(),E=D(),m=D(),M=D(),T=()=>{n.value!==void 0&&(e.displayReductionRatio=n.value.clientWidth/n.value.width)},A=(t,o)=>{w.value!==void 0&&(w.value.style.width=t*e.displayReductionRatio+"px",w.value.style.height=o*e.displayReductionRatio+"px")},b=(t,o)=>{m.value!==void 0&&(m.value.width=t,m.value.height=o)},L=(t,o)=>{u.currentSize.width=t,u.currentSize.height=o},G=()=>{var s;if(d(),n.value===void 0||m.value===void 0||(E.value=n.value.getContext("2d"),M.value=m.value.getContext("2d"),u.originalFile=(s=v.uploadFile)==null?void 0:s.raw,u.originalFile===void 0))return;const t=new Image;t.crossOrigin="anonymous";const o=new FileReader;o.onload=r=>{var X;t.onload=()=>{var J;const g=t.width,k=t.height;n.value!==void 0&&(n.value.width=g,n.value.height=k,T(),L(g,k),A(g,k),b(g,k),(J=E.value)==null||J.drawImage(t,0,0),h())},t.onerror=()=>{f("error","\u753B\u50CF\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u7D4C\u3063\u3066\u304B\u3089\u3001\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",!0),K()};const i=(X=r.target)==null?void 0:X.result;t.src=i},o.readAsDataURL(u.originalFile)},oe=()=>{O(),x(),G()},O=()=>{m.value!==void 0&&M.value!=null&&M.value.clearRect(0,0,m.value.width,m.value.height)},x=()=>{e.tempRectStartX=0,e.tempRectStartY=0,e.tempRectEndX=0,e.tempRectEndY=0,e.rectStartX=0,e.rectStartY=0,e.rectEndX=0,e.rectEndY=0,e.hasRect=!1},ue=t=>{e.isMouseDown=!0,se(t),window.addEventListener("mousemove",$),window.addEventListener("mouseup",P)},se=t=>{if(n.value===void 0)return;const o=n.value.getBoundingClientRect(),s=window.pageXOffset+o.left,r=window.pageYOffset+o.top,i=t.pageX-s,X=t.pageY-r;e.mouseDownX=Math.round(i/e.displayReductionRatio),e.mouseDownY=Math.round(X/e.displayReductionRatio)},ne=t=>{if(m.value===void 0)return;const o=m.value.getBoundingClientRect(),s=window.pageXOffset+o.left,r=window.pageYOffset+o.top,i=t.pageX-s,X=t.pageY-r;e.mouseMoveX=Math.round(i/e.displayReductionRatio),e.mouseMoveY=Math.round(X/e.displayReductionRatio);const g={topLeft:e.mouseMoveX<0&&e.mouseMoveY<0,topRight:u.currentSize.width<e.mouseMoveX&&e.mouseMoveY<0,bottomRight:u.currentSize.width<e.mouseMoveX&&u.currentSize.height<e.mouseMoveY,bottomLeft:e.mouseMoveX<0&&u.currentSize.height<e.mouseMoveY,top:e.mouseMoveY<0,right:u.currentSize.width<e.mouseMoveX,bottom:u.currentSize.height<e.mouseMoveY,left:e.mouseMoveX<0};g.topLeft?(e.mouseMoveX=0,e.mouseMoveY=0):g.topRight?(e.mouseMoveX=u.currentSize.width,e.mouseMoveY=0):g.bottomRight?(e.mouseMoveX=u.currentSize.width,e.mouseMoveY=u.currentSize.height):g.bottomLeft?(e.mouseMoveX=0,e.mouseMoveY=u.currentSize.height):g.top?e.mouseMoveY=0:g.right?e.mouseMoveX=u.currentSize.width:g.bottom?e.mouseMoveY=u.currentSize.height:g.left&&(e.mouseMoveX=0)},ae=()=>{if(m.value===void 0||M.value==null)return;const t={fillStyle:"rgba("+[0,0,0,.6]+")",strokeStyle:"white",setLineDash:[20,10],lineWidth:4};M.value.fillStyle=t.fillStyle,M.value.fillRect(0,0,m.value.width,m.value.height)},re=()=>{if(m.value===void 0||M.value==null)return;e.hasRect=!0;const t={strokeStyle:"white",setLineDash:[20,10],lineWidth:4};M.value.strokeStyle=t.strokeStyle,M.value.setLineDash(t.setLineDash),M.value.lineWidth=t.lineWidth;const o=e.clickableRange,s={fromTopLeft:e.rectStartX-o<e.mouseDownX&&e.mouseDownX<e.rectStartX+o&&e.rectStartY-o<e.mouseDownY&&e.mouseDownY<e.rectStartY+o,fromTopRight:e.rectEndX-o<e.mouseDownX&&e.mouseDownX<e.rectEndX+o&&e.rectStartY-o<e.mouseDownY&&e.mouseDownY<e.rectStartY+o,fromBottomRight:e.rectEndX-o<e.mouseDownX&&e.mouseDownX<e.rectEndX+o&&e.rectEndY-o<e.mouseDownY&&e.mouseDownY<e.rectEndY+o,fromBottomLeft:e.rectStartX-o<e.mouseDownX&&e.mouseDownX<e.rectStartX+o&&e.rectEndY-o<e.mouseDownY&&e.mouseDownY<e.rectEndY+o,fromTop:e.rectStartX-o<e.mouseDownX&&e.mouseDownX<e.rectEndX+o&&e.rectStartY-o<e.mouseDownY&&e.mouseDownY<e.rectStartY+o,fromRight:e.rectEndX-o<e.mouseDownX&&e.mouseDownX<e.rectEndX+o&&e.rectStartY-o<e.mouseDownY&&e.mouseDownY<e.rectEndY+o,fromBottom:e.rectStartX-o<e.mouseDownX&&e.mouseDownX<e.rectEndX+o&&e.rectEndY-o<e.mouseDownY&&e.mouseDownY<e.rectEndY+o,fromLeft:e.rectStartX-o<e.mouseDownX&&e.mouseDownX<e.rectStartX+o&&e.rectStartY-o<e.mouseDownY&&e.mouseDownY<e.rectEndY+o};s.fromTopLeft?(e.mouseMoveX<e.rectEndX?(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.rectEndX):(e.tempRectStartX=e.rectEndX,e.tempRectEndX=e.mouseMoveX),e.mouseMoveY<e.rectEndY?(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.rectEndY):(e.tempRectStartY=e.rectEndY,e.tempRectEndY=e.mouseMoveY)):s.fromTopRight?(e.rectStartX<e.mouseMoveX?(e.tempRectStartX=e.rectStartX,e.tempRectEndX=e.mouseMoveX):(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.rectStartX),e.mouseMoveY<e.rectEndY?(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.rectEndY):(e.tempRectStartY=e.rectEndY,e.tempRectEndY=e.mouseMoveY)):s.fromBottomRight?(e.rectStartX<e.mouseMoveX?(e.tempRectStartX=e.rectStartX,e.tempRectEndX=e.mouseMoveX):(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.rectStartX),e.rectStartY<e.mouseMoveY?(e.tempRectStartY=e.rectStartY,e.tempRectEndY=e.mouseMoveY):(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.rectStartY)):s.fromBottomLeft?(e.mouseMoveX<e.rectEndX?(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.rectEndX):(e.tempRectStartX=e.rectEndX,e.tempRectEndX=e.mouseMoveX),e.rectStartY<e.mouseMoveY?(e.tempRectStartY=e.rectStartY,e.tempRectEndY=e.mouseMoveY):(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.rectStartY)):s.fromTop?(e.tempRectStartX=e.rectStartX,e.tempRectEndX=e.rectEndX,e.mouseMoveY<e.rectEndY?(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.rectEndY):(e.tempRectStartY=e.rectEndY,e.tempRectEndY=e.mouseMoveY)):s.fromRight?(e.rectStartX<e.mouseMoveX?(e.tempRectStartX=e.rectStartX,e.tempRectEndX=e.mouseMoveX):(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.rectStartX),e.tempRectStartY=e.rectStartY,e.tempRectEndY=e.rectEndY):s.fromBottom?(e.tempRectStartX=e.rectStartX,e.tempRectEndX=e.rectEndX,e.rectStartY<e.mouseMoveY?(e.tempRectStartY=e.rectStartY,e.tempRectEndY=e.mouseMoveY):(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.rectStartY)):s.fromLeft?(e.mouseMoveX<e.rectEndX?(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.rectEndX):(e.tempRectStartX=e.rectEndX,e.tempRectEndX=e.mouseMoveX),e.tempRectStartY=e.rectStartY,e.tempRectEndY=e.rectEndY):(e.mouseDownX<e.mouseMoveX?(e.tempRectStartX=e.mouseDownX,e.tempRectEndX=e.mouseMoveX):(e.tempRectStartX=e.mouseMoveX,e.tempRectEndX=e.mouseDownX),e.mouseDownY<e.mouseMoveY?(e.tempRectStartY=e.mouseDownY,e.tempRectEndY=e.mouseMoveY):(e.tempRectStartY=e.mouseMoveY,e.tempRectEndY=e.mouseDownY));const r=e.tempRectEndX-e.tempRectStartX,i=e.tempRectEndY-e.tempRectStartY,X=t.lineWidth,g=t.lineWidth/2;M.value.strokeRect(e.tempRectStartX,e.tempRectStartY,r,i),M.value.clearRect(e.tempRectStartX+g,e.tempRectStartY+g,r-X,i-X)},$=t=>{ne(t),e.isMouseDown&&(O(),ae(),re())},ie=()=>{if(m.value===void 0)return;const t=e.clickableRange;if(e.hasRect){const o={topLeft:e.rectStartX-t<e.mouseMoveX&&e.mouseMoveX<e.rectStartX+t&&e.rectStartY-t<e.mouseMoveY&&e.mouseMoveY<e.rectStartY+t,topRight:e.rectEndX-t<e.mouseMoveX&&e.mouseMoveX<e.rectEndX+t&&e.rectStartY-t<e.mouseMoveY&&e.mouseMoveY<e.rectStartY+t,bottomRight:e.rectEndX-t<e.mouseMoveX&&e.mouseMoveX<e.rectEndX+t&&e.rectEndY-t<e.mouseMoveY&&e.mouseMoveY<e.rectEndY+t,bottomLeft:e.rectStartX-t<e.mouseMoveX&&e.mouseMoveX<e.rectStartX+t&&e.rectEndY-t<e.mouseMoveY&&e.mouseMoveY<e.rectEndY+t,top:e.rectStartX-t<e.mouseMoveX&&e.mouseMoveX<e.rectEndX+t&&e.rectStartY-t<e.mouseMoveY&&e.mouseMoveY<e.rectStartY+t,right:e.rectEndX-t<e.mouseMoveX&&e.mouseMoveX<e.rectEndX+t&&e.rectStartY-t<e.mouseMoveY&&e.mouseMoveY<e.rectEndY+t,bottom:e.rectStartX-t<e.mouseMoveX&&e.mouseMoveX<e.rectEndX+t&&e.rectEndY-t<e.mouseMoveY&&e.mouseMoveY<e.rectEndY+t,left:e.rectStartX-t<e.mouseMoveX&&e.mouseMoveX<e.rectStartX+t&&e.rectStartY-t<e.mouseMoveY&&e.mouseMoveY<e.rectEndY+t};o.topLeft?m.value.style.cursor="nwse-resize":o.topRight?m.value.style.cursor="nesw-resize":o.bottomRight?m.value.style.cursor="nwse-resize":o.bottomLeft?m.value.style.cursor="nesw-resize":o.top?m.value.style.cursor="ns-resize":o.right?m.value.style.cursor="ew-resize":o.bottom?m.value.style.cursor="ns-resize":o.left?m.value.style.cursor="ew-resize":m.value.style.cursor="crosshair"}else m.value.style.cursor="crosshair"},ce=t=>{e.isMouseDown||($(t),ie())},P=()=>{window.removeEventListener("mousemove",$),e.isMouseDown=!1,window.removeEventListener("mouseup",P),le()},le=()=>{e.rectStartX=e.tempRectStartX,e.rectEndX=e.tempRectEndX,e.rectStartY=e.tempRectStartY,e.rectEndY=e.tempRectEndY},de=()=>{var s;if(d(),u.cropSize.width===0||u.cropSize.height===0||n.value===void 0)return;const t=n.value.toDataURL((s=u.originalFile)==null?void 0:s.type),o=new Image;o.onload=()=>{if(E.value==null)return;const r=u.cropSize.width,i=u.cropSize.height;n.value!==void 0&&(n.value.width=r,n.value.height=i,T(),L(r,i),A(r,i),b(r,i),E.value.drawImage(o,e.rectStartX,e.rectStartY,r,i,0,0,r,i),x(),h())},o.src=t},me=t=>{var r;if(d(),O(),n.value===void 0)return;const o=n.value.toDataURL((r=u.originalFile)==null?void 0:r.type),s=new Image;s.onload=()=>{if(n.value===void 0)return;const i=n.value.height,X=n.value.width;n.value.width=i,n.value.height=X,L(i,X),A(i,X),b(i,X);const g=t==="right"?90:-90;E.value!=null&&(E.value.save(),E.value.translate(i/2,X/2),E.value.rotate(g*Math.PI/180),E.value.translate(-s.width/2,-s.height/2),E.value.drawImage(s,0,0),E.value.restore(),x(),h())},s.src=o},pe=(t,o)=>{u.resize.width=t,u.resize.height=o},ve=()=>{var s;if(n.value===void 0)return;const t=n.value.toDataURL((s=u.originalFile)==null?void 0:s.type),o=new Image;o.onload=()=>{if(E.value==null)return;const r=u.resize.width,i=u.resize.height;n.value!==void 0&&(n.value.width=r,n.value.height=i,T(),L(r,i),A(r,i),b(r,i),E.value.drawImage(o,0,0,r,i),x(),h())},o.src=t},he=()=>{var r;if(n.value===void 0)return;const t=n.value.toDataURL((r=u.originalFile)==null?void 0:r.type),o=ge(t),s=document.createElement("a");s.href=window.URL.createObjectURL(o),u.originalFile!==void 0&&(s.download=u.originalFile.name,s.click())},ge=t=>{var g;const o=t.split(","),s=atob(o[1]),r=new Uint8Array(s.length);for(var i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return new Blob([r],{type:(g=u.originalFile)==null?void 0:g.name})},K=()=>{l("returnUploader")};return Ye(()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",P)}),(t,o)=>{const s=y("el-button"),r=we("loading");return Se((F(),B("div",ft,[c("div",Et,[c("div",Xt,[_(_t,{"can-crop":S(Y),onCropCanvasImage:de,onRotateCanvasImage:me},null,8,["can-crop"]),c("div",Yt,[c("div",{ref_key:"canvasContainer",ref:w,class:"image-canvas"},[c("canvas",{ref_key:"displayCanvas",ref:n,class:"display"},null,512),c("canvas",{ref_key:"drawingCanvas",ref:m,class:"drawing",onMousedown:ue,onMousemove:ce},null,544)],512)]),c("div",wt,[_(s,{class:"resetButton",plain:"",icon:S(Re),onClick:oe},{default:C(()=>[St]),_:1},8,["icon"]),_(s,{type:"primary",icon:S(Me),onClick:he},{default:C(()=>[Rt]),_:1},8,["icon"])]),_(s,{class:"returnButton",type:"text",plain:"",icon:S(Ce),onClick:K},{default:C(()=>[Mt]),_:1},8,["icon"])]),c("div",Ct,[c("div",Ft,[_(Ge,{"upload-image":S(u),canvas:S(e)},null,8,["upload-image","canvas"])]),c("div",Dt,[_(rt,{"upload-image":S(u),onSetImageResize:pe,onResizeCanvasImage:ve},null,8,["upload-image"])])])])])),[[r,S(p)]])}}});var yt=I(Bt,[["__scopeId","data-v-6b31f17d"]]);const zt={class:"app-wrapper"},It={class:"app-main"},At=z({setup(a){const l=D("uploader"),v=D(void 0),p=h=>{v.value=h,l.value="editor"},d=()=>{l.value="uploader"};return(h,f)=>(F(),B("div",zt,[_(xe),c("main",It,[l.value==="uploader"?(F(),j(Te,{key:0,onGoToEditor:p})):(F(),j(yt,{key:1,"upload-file":v.value,onReturnUploader:d},null,8,["upload-file"]))])]))}});var bt=I(At,[["__scopeId","data-v-4bd23e01"]]);const Lt=z({setup(a){return(l,v)=>(F(),j(bt))}});const te=Fe(Lt);te.use(De);te.mount("#app");
